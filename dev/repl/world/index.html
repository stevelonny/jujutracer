<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>World · jujutracer</title><meta name="title" content="World · jujutracer"/><meta property="og:title" content="World · jujutracer"/><meta property="twitter:title" content="World · jujutracer"/><meta name="description" content="Documentation for jujutracer."/><meta property="og:description" content="Documentation for jujutracer."/><meta property="twitter:description" content="Documentation for jujutracer."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">jujutracer</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><span class="tocitem">Home</span><ul><li><a class="tocitem" href="../../">jujutracer</a></li><li><a class="tocitem" href="../../introduction/">Overall</a></li></ul></li><li><span class="tocitem">Usage</span><ul><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">Scene Usage</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../scene/scene_usage/">Scene Usage</a></li><li><a class="tocitem" href="../../scene/interpreter/">Interpreter</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox" checked/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">REPL Usage</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../repl_usage/">REPL Usage</a></li><li class="is-active"><a class="tocitem" href>World</a><ul class="internal"><li><a class="tocitem" href="#Materials"><span>Materials</span></a></li><li><a class="tocitem" href="#Transformations"><span>Transformations</span></a></li><li><a class="tocitem" href="#Shapes"><span>Shapes</span></a></li><li><a class="tocitem" href="#Acceleration-Structures"><span>Acceleration Structures</span></a></li><li><a class="tocitem" href="#Light-Sources"><span>Light Sources</span></a></li></ul></li><li><a class="tocitem" href="../rendering/">Rendering</a></li><li><a class="tocitem" href="../repl_examples/">REPL Examples</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Usage</a></li><li><a class="is-disabled">REPL Usage</a></li><li class="is-active"><a href>World</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>World</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/stevelonny/jujutracer" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/stevelonny/jujutracer/blob/main/docs/src/repl/world.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="World"><a class="docs-heading-anchor" href="#World">World</a><a id="World-1"></a><a class="docs-heading-anchor-permalink" href="#World" title="Permalink"></a></h1><p>To define a scene, you will need to place some shapes in the world. All shapes are a subtype of <a href><code>AbstractShape</code></a>. Moreover, shapes which are considerer &quot;solid&quot; or &quot;closed&quot; are a subtype of <a href><code>AbstractSolid</code></a>. In addition to standard shapes there are auxiliary shapes such as <a href><code>AABB</code></a> and <a href><code>BVHShape</code></a> which are used as acceleration structures.</p><p>Every shape needs a material and a transformation.</p><h2 id="Materials"><a class="docs-heading-anchor" href="#Materials">Materials</a><a id="Materials-1"></a><a class="docs-heading-anchor-permalink" href="#Materials" title="Permalink"></a></h2><p>Materials are defined in a concrete type:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.Material" href="#jujutracer.Material"><code>jujutracer.Material</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Material</code></pre><p><strong>Fields</strong></p><ul><li><code>Emition::AbstractPigment</code>: the pigement with which the radiation is emitted.</li><li><code>BRDF::AbstractBRDF</code>: the BRDF of the material.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/brdf.jl#L103-L109">source</a></section></article><h3 id="Pigments"><a class="docs-heading-anchor" href="#Pigments">Pigments</a><a id="Pigments-1"></a><a class="docs-heading-anchor-permalink" href="#Pigments" title="Permalink"></a></h3><p>The emission of the material can be defined as a pigment, which is a subtype of <a href><code>AbstractPigment</code></a>. </p><p>They are based on the ColorTypes.jl package, of which we use the <code>RGB</code> type.</p><p>There are three types of pigments:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.UniformPigment" href="#jujutracer.UniformPigment"><code>jujutracer.UniformPigment</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">UniformPigment()</code></pre><p>Uniform Pigment for Shapes</p><p><strong>Fields</strong></p><ul><li><code>color::RBG</code> the uniform color</li></ul><p><strong>Functional Usage</strong></p><p><code>UniformPigment(p::SurfacePoint)</code> return the <code>RGB</code> associated to the <code>(u, v)</code> coordinates of the <code>SurfacePoint</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/brdf.jl#L10-L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.CheckeredPigment" href="#jujutracer.CheckeredPigment"><code>jujutracer.CheckeredPigment</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CheckeredPigment(col::Int32, row::Int32, dark::RGB, bright::RGB)</code></pre><p>Checkered pigment for a Shape, subdiveded in <code>row</code> rows and <code>col</code> columns with alternate <code>dark</code> and <code>bright</code> color</p><p><strong>Fields</strong></p><ul><li><code>col</code> number of horizontal subdivisions</li><li><code>row</code> number of vertical subdivisions</li><li><code>dark</code> color of the dark squares</li><li><code>bright</code> color of the bright squares</li></ul><p><strong>Functional Usage</strong></p><p><code>CheckeredPigment(p::SurfacePoint)</code> return the <code>RGB</code> associated to the <code>(u, v)</code> coordinates of the <code>SurfacePoint</code> </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/brdf.jl#L33-L45">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.ImagePigment" href="#jujutracer.ImagePigment"><code>jujutracer.ImagePigment</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ImagePigment(img::hdrimg)</code></pre><p>Print the image <code>img</code> as pigment of the surface</p><p><strong>Fields</strong></p><ul><li><code>img::hdrimg</code> the image in hdr format</li></ul><p><strong>Functional Usage</strong></p><p><code>ImagePigment(p::SurfacePoint)</code> return the <code>RGB</code> of to the <code>(u, v)</code> coordinates of the <code>SurfacePoint</code> associated to the corresponding element of <code>img</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/brdf.jl#L54-L62">source</a></section></article><h3 id="BRDFs"><a class="docs-heading-anchor" href="#BRDFs">BRDFs</a><a id="BRDFs-1"></a><a class="docs-heading-anchor-permalink" href="#BRDFs" title="Permalink"></a></h3><p>The BRDF of the material is defined as a subtype of <a href><code>AbstractBRDF</code></a>. The available BRDFs are</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.DiffusiveBRDF" href="#jujutracer.DiffusiveBRDF"><code>jujutracer.DiffusiveBRDF</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">DiffusiveBRDF(Pigment::AbstractPigment)</code></pre><p>Diffusive BRDF with reflective pigment <code>Pigment</code>.</p><p><strong>Fields</strong></p><ul><li><code>Pigment::AbstractPigment</code>: the pigment used for the BRDF.</li></ul><p><strong>Functional Usage</strong></p><p><code>DiffusiveBRDF(pcg::PCG, in_dir::Vec, p::Point, normal::Normal, depth::Int64)</code> returns a Ray sampled with diffusion.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/brdf.jl#L73-L81">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.SpecularBRDF" href="#jujutracer.SpecularBRDF"><code>jujutracer.SpecularBRDF</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SpecularBRDF(Pigment::AbstractPigment)</code></pre><p>Specular BRDF with reflective pigment <code>Pigment</code>.</p><p><strong>Fields</strong></p><ul><li><code>Pigment::AbstractPigment</code>: the pigment used for the BRDF.</li></ul><p><strong>Functional Usage</strong></p><p><code>SpecularBRDF(pcg::PCG, in_dir::Vec, p::Point, normal::Normal, depth::Int64)</code> returns a Ray sampled with specular reflection. Can also be called withtout <code>pcg</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/brdf.jl#L86-L94">source</a></section></article><p>A complete material can be defined as follows:</p><pre><code class="language-julia hljs">mat = Material(
    ImagePigment(&quot;asset/sky.pfm&quot;),
    DiffuseBRDF(UniformPigment(RGB(0.1, 0.7, 0.3)))
)</code></pre><h2 id="Transformations"><a class="docs-heading-anchor" href="#Transformations">Transformations</a><a id="Transformations-1"></a><a class="docs-heading-anchor-permalink" href="#Transformations" title="Permalink"></a></h2><p>Transformations are defined as a subtype of <a href><code>AbstractTransformation</code></a>. They are structs thah hold a transformation matrix and its inverse for fast change of basis from world to local coordinates. The available transformations are:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.Transformation" href="#jujutracer.Transformation"><code>jujutracer.Transformation</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Transformation &lt;: AbstractTransformation</code></pre><p>Represents a transformation in 3D space with homogeneous coordinates. This structure is a subtype of <a href><code>AbstractTransformation</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>M::Matrix{Float64}</code>: The 4x4 transformation matrix.</li><li><code>inv::Matrix{Float64}</code>: The 4x4 inverse of the transformation matrix.</li></ul><p><strong>Constructors</strong></p><ul><li><code>Transformation()</code>: Creates an identity transformation where <code>M</code> and <code>inv</code> are both 4x4 identity matrices.</li><li><code>Transformation(M::Matrix{Float64}, inv::Matrix{Float64})</code>: Creates a transformation with the given <code>M</code> and <code>inv</code> matrices.</li><li><code>Transformation(M::Matrix{Float64}, inv::Matrix{Float64}, unsafe::Unsafe)</code>: Creates a transformation with the given <code>M</code> and <code>inv</code> matrices, without veryfing the inputs.</li></ul><p>Throws an <code>ArgumentError</code> if:</p><ul><li><code>M</code> or <code>inv</code> are not 4x4 matrices.</li><li>The last element of <code>M</code> or <code>inv</code> is not <code>1.0</code>.</li><li><code>M</code> and <code>inv</code> are not inverses of each other.</li></ul><p><strong>Notes</strong></p><p>The <code>M</code> and <code>inv</code> matrices must satisfy the following conditions:</p><ul><li>Both must be 4x4 matrices.</li><li>The last element of both matrices must be <code>1.0</code>.</li><li>The product of <code>M</code> and <code>inv</code> must be <em>approximately</em> equal to the 4x4 identity matrix.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/geometry.jl#L214-L238">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.Translation" href="#jujutracer.Translation"><code>jujutracer.Translation</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Translation &lt;: AbstractTransformation</code></pre><p>Represents a translation in 3D space with homogeneous coordinates. This structure is a subtype of <a href><code>AbstractTransformation</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>M::Matrix{Float64}</code>: The 4x4 transformation matrix.</li><li><code>inv::Matrix{Float64}</code>: The 4x4 inverse transformation matrix.</li></ul><p><strong>Constructors</strong></p><ul><li><p><code>Translation(dx::Float64, dy::Float64, dz::Float64)</code>:  Creates a <code>Translation</code> object with translation offsets <code>dx</code>, <code>dy</code>, and <code>dz</code> along the x, y, and z axes, respectively.</p></li><li><p><code>Translation(v::Vec)</code>: Creates a <code>Translation</code> object using a <code>Vec</code> object.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/geometry.jl#L265-L281">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.Rx" href="#jujutracer.Rx"><code>jujutracer.Rx</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Rx &lt;: AbstractTransformation</code></pre><p>Represents a rotation transformation around the x-axis in 3D space. This structure is a subtype of <a href><code>AbstractTransformation</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>M::Matrix{Float64}</code>: The 4x4 transformation matrix.</li><li><code>inv::Matrix{Float64}</code>: The 4x4 inverse of the transformation matrix.</li></ul><p><strong>Constructor</strong></p><ul><li><code>Rx(θ)</code>: Creates an <code>Rx</code> instance for a given rotation <code>θ</code> (in radians).</li></ul><p><strong>See also</strong></p><ul><li><a href><code>Ry</code></a>: For rotation around the y-axis.</li><li><a href><code>Rz</code></a>: For rotation around the z-axis.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/geometry.jl#L329-L345">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.Ry" href="#jujutracer.Ry"><code>jujutracer.Ry</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Ry &lt;: AbstractTransformation</code></pre><p>Represents a rotation transformation around the y-axis in 3D space. This structure is a subtype of <a href><code>AbstractTransformation</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>M::Matrix{Float64}</code>: The 4x4 transformation matrix.</li><li><code>inv::Matrix{Float64}</code>: The 4x4 inverse of the transformation matrix.</li></ul><p><strong>Constructor</strong></p><ul><li><code>Ry(θ)</code>: Creates an <code>Ry</code> instance for a given rotation <code>θ</code> (in radians).</li></ul><p><strong>See also</strong></p><ul><li><a href><code>Rx</code></a>: For rotation around the x-axis.</li><li><a href><code>Rz</code></a>: For rotation around the z-axis.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/geometry.jl#L359-L375">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.Rz" href="#jujutracer.Rz"><code>jujutracer.Rz</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Rz &lt;: AbstractTransformation</code></pre><p>Represents a rotation transformation around the z-axis in 3D space. This structure is a subtype of <a href><code>AbstractTransformation</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>M::Matrix{Float64}</code>: The 4x4 transformation matrix.</li><li><code>inv::Matrix{Float64}</code>: The 4x4 inverse of the transformation matrix.</li></ul><p><strong>Constructor</strong></p><ul><li><code>Rz(θ)</code>: Creates an <code>Rz</code> instance for a given rotation <code>θ</code> (in radians).</li></ul><p><strong>See also</strong></p><ul><li><a href><code>Rx</code></a>: For rotation around the x-axis.</li><li><a href><code>Ry</code></a>: For rotation around the y-axis.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/geometry.jl#L389-L405">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.Scaling" href="#jujutracer.Scaling"><code>jujutracer.Scaling</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Scaling &lt;: AbstractTransformation</code></pre><p>Represents a scaling transformation in 3D space. This structure is a subtype of <a href><code>AbstractTransformation</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>M::Matrix{Float64}</code>: The 4x4 transformation matrix.</li><li><code>inv::Matrix{Float64}</code>: The 4x4 inverse of the transformation matrix.</li></ul><p><strong>Constructor</strong></p><ul><li><code>Scaling(x::Float64, y::Float64, z::Float64):   Creates a</code>Scaling<code>instance with scaling factors</code>x<code>,</code>y<code>, and</code>z<code>along the x, y, and z axes, respectively.   Throws an</code>ArgumentError` if any of the scaling factors are zero.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/geometry.jl#L298-L312">source</a></section></article><h2 id="Shapes"><a class="docs-heading-anchor" href="#Shapes">Shapes</a><a id="Shapes-1"></a><a class="docs-heading-anchor-permalink" href="#Shapes" title="Permalink"></a></h2><p>Shapes are defined as a subtype of <a href><code>AbstractShape</code></a>. There are two categories of shapes:, the ones that can be used in CSG operations and the ones that cannot, such as flat shapes.</p><h3 id="Water-tight-Shapes"><a class="docs-heading-anchor" href="#Water-tight-Shapes">Water-tight Shapes</a><a id="Water-tight-Shapes-1"></a><a class="docs-heading-anchor-permalink" href="#Water-tight-Shapes" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.Sphere" href="#jujutracer.Sphere"><code>jujutracer.Sphere</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Sphere &lt;: AbstractSolid</code></pre><p>A sphere. Unit radius sphere centered at the origin. This structure is a subtype of <a href><code>AbstractSolid</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>t::Transformation</code>: the transformation applied to the sphere.</li><li><code>Mat::Material</code>: the material of the shape</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/solidsphere.jl#L5-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.Box" href="#jujutracer.Box"><code>jujutracer.Box</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Box &lt;: AbstractSolid</code></pre><p>An axis-aligned box (rectangular cuboid) defined by two opposite corners.</p><p><strong>Fields</strong></p><ul><li><code>Tr::AbstractTransformation</code>: The transformation applied to the box.</li><li><code>P1::Point</code>: One corner of the box (minimum x, y, z) in the Box&#39;s local coordinate system.</li><li><code>P2::Point</code>: The opposite corner of the box (maximum x, y, z) in the Box&#39;s local coordinate system.</li><li><code>Mat::Material</code>: The material of the box.</li></ul><p><strong>Constructors</strong></p><ul><li><code>Box()</code>: Creates a new box with default transformation and material.</li><li><code>Box(P1::Point, P2::Point)</code>: Creates a new box with the specified corners and default transformation and material.</li><li><code>Box(P1::Point, P2::Point, Mat::Material)</code>: Creates a new box with the specified corners and material.</li><li><code>Box(Tr::AbstractTransformation)</code>: Creates a new box with the specified transformation and default material.</li><li><code>Box(Tr::AbstractTransformation, P1::Point, P2::Point)</code>: Creates a new box with the specified transformation and corners.</li><li><code>Box(Tr::AbstractTransformation, P1::Point, P2::Point, Mat::Material)</code>: Creates a new box with the specified transformation, corners, and material.</li><li><code>Box(Mat::Material)</code>: Creates a new box with the default transformation and the specified material.</li><li><code>Box(Tr::AbstractTransformation, Mat::Material)</code>: Creates a new box with the specified transformation and material.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/solidbox.jl#L5-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.Cone" href="#jujutracer.Cone"><code>jujutracer.Cone</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Cone &lt;: AbstractSolid</code></pre><p>A cone of unitary radiuos and height resting on the xy plane. This structure is a subtype of <a href><code>AbstractSolid</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>Tr::Transformation</code>: the transformation applied to the sphere.</li><li><code>Mat::Material</code>: the material of the shape</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/solidcone.jl#L5-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.Cylinder" href="#jujutracer.Cylinder"><code>jujutracer.Cylinder</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Cylinder &lt;: AbstractSolid</code></pre><p>A cylinder of unitary radius and height centered in the origin. This structure is a subtype of <a href><code>AbstractSolid</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>Tr::Transformation</code>: the transformation applied to the sphere.</li><li><code>Mat::Material</code>: the material of the shape</li></ul><p><strong>Constructors</strong></p><ul><li><code>Cylinder()</code>: Creates a new cylinder with default transformation and material.</li><li><code>Cylinder(Tr::AbstractTransformation)</code>: Creates a new cylinder with the specified transformation and default material.</li><li><code>Cylinder(Mat::Material)</code>: Creates a new cylinder with the default transformation and the specified material.</li><li><code>Cylinder(Tr::AbstractTransformation, Mat::Material)</code>: Creates a new cylinder with the specified transformation and material.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/solidcylinder.jl#L5-L18">source</a></section></article><h4 id="CSG-Shapes"><a class="docs-heading-anchor" href="#CSG-Shapes">CSG Shapes</a><a id="CSG-Shapes-1"></a><a class="docs-heading-anchor-permalink" href="#CSG-Shapes" title="Permalink"></a></h4><p>Set operations are defined as methods on the <a href><code>AbstractSolid</code></a>` type. The available operations are:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.CSGUnion" href="#jujutracer.CSGUnion"><code>jujutracer.CSGUnion</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct CSGUnion &lt;: AbstractSolid</code></pre><p>Represents the union of two solid shapes.</p><p><strong>Fields</strong></p><ul><li><code>Tr::AbstractTransformation</code>: The transformation applied to the union.</li><li><code>Sh1::AbstractSolid</code>, <code>Sh2::AbstractSolid</code>: The two solid shapes being united.</li></ul><p><strong>See also</strong></p><ul><li><a href><code>CSGDifference</code></a>: Represents the difference of two solid shapes.</li><li><a href><code>CSGIntersection</code></a>: Represents the intersection of two solid shapes.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/csg.jl#L5-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.CSGIntersection" href="#jujutracer.CSGIntersection"><code>jujutracer.CSGIntersection</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct CSGIntersection &lt;: AbstractSolid</code></pre><p>Represents the intersection of two solid shapes.</p><p><strong>Fields</strong></p><ul><li><code>Tr::AbstractTransformation</code>: The transformation applied to the intersection.</li><li><code>Sh1::AbstractSolid</code>, <code>Sh2::AbstractSolid</code>: The two solid shapes being intersected.</li></ul><p><strong>See also</strong></p><ul><li><a href><code>CSGUnion</code></a>: Represents the union of two solid shapes.</li><li><a href><code>CSGDifference</code></a>: Represents the difference of two solid shapes.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/csg.jl#L39-L49">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.CSGDifference" href="#jujutracer.CSGDifference"><code>jujutracer.CSGDifference</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct CSGDifference &lt;: AbstractSolid</code></pre><p>Represents the difference of two solid shapes.</p><p><strong>Fields</strong></p><ul><li><code>Tr::AbstractTransformation</code>: The transformation applied to the difference.</li><li><code>Sh1::AbstractSolid</code>, <code>Sh2::AbstractSolid</code>: The two solid shapes where <code>Sh1 - Sh2</code> is computed.</li></ul><p><strong>See also</strong></p><ul><li><a href><code>CSGUnion</code></a>: Represents the union of two solid shapes.</li><li><a href><code>CSGIntersection</code></a>: Represents the intersection of two solid shapes.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/csg.jl#L22-L32">source</a></section></article><h3 id="Flat-Shapes"><a class="docs-heading-anchor" href="#Flat-Shapes">Flat Shapes</a><a id="Flat-Shapes-1"></a><a class="docs-heading-anchor-permalink" href="#Flat-Shapes" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.Plane" href="#jujutracer.Plane"><code>jujutracer.Plane</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Plane &lt;: AbstractShape</code></pre><p>A plane. This structure is a subtype of <a href><code>AbstractShape</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>t::Transformation</code>: the transformation applied to the plane</li><li><code>Mat::Material</code>: the material of the shape</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/flatplane.jl#L5-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.Triangle" href="#jujutracer.Triangle"><code>jujutracer.Triangle</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Triangle &lt;: AbstractShape</code></pre><p>Triangle.</p><p><strong>Fields</strong></p><ul><li><code>t::Transformation</code>: the transformation applied to the triangle</li><li><code>A, B, C::Point</code>: the vertices of the triangle</li><li><code>Mat::Material</code>: the material of the shape</li></ul><p><strong>Constructor</strong></p><ul><li><code>Triangle()</code>: creates a triangle with Identity <code>Transformation</code> and vertices (0,0,0), (1,0,0), (0,1,0) and a default material.</li><li><code>Triangle(Tr::AbstractTransformation)</code>: creates a triangle with <code>Tr</code> <code>Transformation</code> and vertices (0,0,0), (1,0,0), (0,1,0) and a default material.</li><li><code>Triangle(Mat::Material)</code>: creates a triangle with Identity <code>Transformation</code> and vertices (0,0,0), (1,0,0), (0,1,0) and a <code>Mat</code> material.</li><li><code>Triangle(Tr::AbstractTransformation, Mat::Material)</code>: creates a triangle with <code>Tr</code> <code>Transformation</code> and vertices (0,0,0), (1,0,0), (0,1,0) and a <code>Mat</code> material.</li><li><code>Triangle(A::Point, B::Point, C::Point)</code>: creates a triangle with Identity <code>Transformation</code> and vertices <code>A</code>, <code>B</code>, <code>C</code> and a default material.</li><li><code>Triangle(A::Point, B::Point, C::Point, Mat::Material)</code>: creates a triangle with Identity <code>Transformation</code> and vertices <code>A</code>, <code>B</code>, <code>C</code> and a <code>Mat</code> material.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/flattriangle.jl#L22-L38">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.Parallelogram" href="#jujutracer.Parallelogram"><code>jujutracer.Parallelogram</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Parallelogram &lt;: AbstractShape</code></pre><p>Parallelogram</p><pre><code class="nohighlight hljs">   C-----p
  /     /
 /     /
A-----B</code></pre><p><strong>Fields</strong></p><ul><li><code>t::Transformation</code>: the transformation applied to the Parallelogram.</li><li><code>A, B, C::Point</code>: the vertices defining the quadrilateral&#39;s </li><li><code>Mat::Material</code>: the material of the shape</li></ul><p><strong>Constructor</strong></p><ul><li><code>Parallelogram()</code>: creates a parallelogram with Identity <code>Transformation</code> and vertices (0,0,0), (1,0,0), (0,1,0) and a default material.</li><li><code>Parallelogram(Tr::AbstractTransformation)</code>: creates a parallelogram with <code>Tr</code> <code>Transformation</code> and vertices (0,0,0), (1,0,0), (0,1,0) and a default material.</li><li><code>Parallelogram(Mat::Material)</code>: creates a parallelogram with Identity <code>Transformation</code> and vertices (0,0,0), (1,0,0), (0,1,0) and a <code>Mat</code> material.</li><li><code>Parallelogram(Tr::AbstractTransformation, Mat::Material)</code>: creates a parallelogram with <code>Tr</code> <code>Transformation</code> and vertices (0,0,0), (1,0,0), (0,1,0) and a <code>Mat</code> material.</li><li><code>Parallelogram(A::Point, B::Point, C::Point)</code>: creates a parallelogram with Identity <code>Transformation</code> and vertices <code>A</code>, <code>B</code>, <code>C</code> and a default material.</li><li><code>Parallelogram(A::Point, B::Point, C::Point, Mat::Material)</code>: creates a parallelogram with Identity <code>Transformation</code> and vertices <code>A</code>, <code>B</code>, <code>C</code> and a <code>Mat</code> material.</li><li><code>Parallelogram(A::Point, AB::Vec, AC::Vec)</code>: creates a parallelogram with Identity <code>Transformation</code> and vertices <code>A</code>, <code>A + AB</code>, <code>A + AC</code> and a default material.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/flatparallelogram.jl#L4-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.Rectangle" href="#jujutracer.Rectangle"><code>jujutracer.Rectangle</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Rectangle &lt;: AbstractShape</code></pre><p>1x1 Rectangle on xy plane, centered in the origin</p><p><strong>Fields</strong></p><ul><li><code>t::Transformation</code>: the transformation applied to the plane</li><li><code>Mat::Material</code>: the material of the shape</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/flatrectangle.jl#L4-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.Circle" href="#jujutracer.Circle"><code>jujutracer.Circle</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Circle &lt;: AbstractShape</code></pre><p>A unit circle in the xy-plane, centered at the origin.</p><p><strong>Fields</strong></p><ul><li><code>Tr::AbstractTransformation</code>: the transformation applied to the circle.</li><li><code>Mat::Material</code>: the material of the shape.</li></ul><p><strong>Constructors</strong></p><ul><li><code>Circle()</code>: Creates a new circle with default transformation and material.</li><li><code>Circle(Tr::AbstractTransformation)</code>: Creates a new circle with the specified transformation and default material.</li><li><code>Circle(Mat::Material)</code>: Creates a new circle with the default transformation and the specified material.</li><li><code>Circle(Tr::AbstractTransformation, Mat::Material)</code>: Creates a new circle with the specified transformation and material.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/flatcircle.jl#L6-L18">source</a></section></article><h3 id="Meshes"><a class="docs-heading-anchor" href="#Meshes">Meshes</a><a id="Meshes-1"></a><a class="docs-heading-anchor-permalink" href="#Meshes" title="Permalink"></a></h3><p>Meshes are defined as structs that hold a vector of triangles, a vector of points and the file from which the mesh was loaded.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.mesh" href="#jujutracer.mesh"><code>jujutracer.mesh</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct mesh &lt;: AbstractShape</code></pre><p>mesh.</p><p><strong>Fields</strong></p><ul><li><code>file::String</code>: the source <code>file.obj</code> of the mesh</li><li><code>shape::Vector{Triangle}</code>: the triangles of the mesh</li></ul><p><strong>Keywords</strong></p><p><code>order::String</code>: the order of the coordinates in the file, default is &quot;dwh&quot; (depth, width, height). If the order is different, you can specify it with this keyword argument.</p><p><strong>Constructor</strong></p><ul><li><code>mesh(shapes::Vector{Triangle})</code>: creates a mesh frome the <code>Vector{Triangle}</code></li><li><code>mesh(file::String)</code>: creates a mesh from <code>file</code></li><li><code>mesh(file::String, Tr::AbstractTransformation)</code>: creates a mesh from <code>file</code> with a transformation <code>Tr</code> </li><li><code>mesh(file::String, Mat::Material)</code>: creates a mesh with <code>Mat</code> material from <code>file</code></li><li><code>mesh(file::String, Tr::AbstractTransformation, Mat::Material)</code>: creates a mesh with <code>Tr</code> transformation and a <code>Mat</code> material.</li></ul><p>For all constructors from obj files, the order of the coordinates in the file is assumed to be &quot;dwh&quot; (depth, width, height) by default. If the order is different, you can specify it with the <code>order</code> keyword argument.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/meshes.jl#L4-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.read_obj_file" href="#jujutracer.read_obj_file"><code>jujutracer.read_obj_file</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">read_obj_file(io::IOBuffer; Tr::AbstractTransformation = Transformation(), Mat::Material = Material(); order = &quot;dwh&quot;)</code></pre><p>Method for constructing vectors and points from a buffer.</p><p><strong>Fields</strong></p><ul><li><code>io::IOBuffer</code>: the buffer</li><li><code>Tr::AbstractTransformation</code>: an hypotetical transformation to be applied to all the shapes and points</li><li><code>Mat::Material</code>: an hypotetical material to be applied to all the triangles</li></ul><p><strong>Keywords</strong></p><ul><li><code>order::String</code>: the order of the coordinates in the file, default is &quot;dwh&quot; (depth, width, height).</li></ul><p><strong>Returns</strong></p><ul><li><code>shape::Vector{Triangle}</code></li><li><code>points:Vector{Points}</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/meshes.jl#L73-L86">source</a></section><section><div><pre><code class="language-julia hljs">read_obj_file(io::IOBuffer; Tr::AbstractTransformation = Transformation(), Mat::Material = Material(); order = &quot;dwh&quot;)</code></pre><p>Method for constructing vectors and points from a file</p><p><strong>Fields</strong></p><ul><li><code>filename::String</code>: the name of the <code>file.obj</code></li><li><code>Tr::AbstractTransformation</code>: an hypotetical transformation to be applied to all the shapes and points</li><li><code>Mat::Material</code>: an hypotetical material to be applied to all the triangles</li></ul><p><strong>Keywords</strong></p><ul><li><code>order::String</code>: the order of the coordinates in the file, default is &quot;dwh&quot; (depth, width, height).</li></ul><p><strong>Returns</strong></p><ul><li><code>shape::Vector{Triangle}</code></li><li><code>points:Vector{Points}</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/meshes.jl#L162-L175">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.trianglize" href="#jujutracer.trianglize"><code>jujutracer.trianglize</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">trianglize(P::Vector{Points}, Tr::AbstractTransformation, Mat::Material)</code></pre><p>Triangulation method, working only with ordered verteces</p><p><strong>Arguments</strong></p><ul><li><code>P::Vector{Point}</code>: the vector of points to be triangulated</li><li><code>Tr::AbstractTransformation</code>: an hypotetical transformation to be applied to all the shapes and points</li><li><code>Mat::Material</code>: a material to be applied to all the triangles</li></ul><p><strong>Returns</strong></p><ul><li><code>tr::Vector{Triangle}</code>: a vector of triangles created from the points in <code>P</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/meshes.jl#L52-L62">source</a></section></article><h2 id="Acceleration-Structures"><a class="docs-heading-anchor" href="#Acceleration-Structures">Acceleration Structures</a><a id="Acceleration-Structures-1"></a><a class="docs-heading-anchor-permalink" href="#Acceleration-Structures" title="Permalink"></a></h2><p>Acceleration structures are used to speed up the ray tracing process by reducing the number of intersection tests.</p><p>The most basic acceleration structure is the <a href><code>AABB</code></a>, which is an axis-aligned bounding box that contains a shape. It is used to quickly eliminate shapes that are not intersected by a ray.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.AABB" href="#jujutracer.AABB"><code>jujutracer.AABB</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct AABB &lt;: AbstractShape</code></pre><p>Axis-Aligned Bounding Box (AABB) for a set of shapes.</p><p><strong>Fields</strong></p><ul><li><code>S::Vector{AbstractShape}</code>: the vector of shapes contained within the AABB.</li><li><code>P1::Point</code>: the minimum corner of the AABB.</li><li><code>P2::Point</code>: the maximum corner of the AABB.</li></ul><p><strong>Constructor</strong></p><ul><li><code>AABB(S::Vector{AbstractShape})</code>: creates an AABB for the shapes in <code>S</code>, calculating the minimum and maximum corners based on the bounding boxes of the shapes.</li><li><code>AABB(S::Vector{AbstractShape}, P1::Point, P2::Point)</code>: creates an AABB with the specified minimum and maximum corners <code>P1</code> and <code>P2</code> for the shapes in <code>S</code>.</li><li><code>AABB(csg::Union{CSGDifference, CSGUnion, CSGIntersection})</code>: creates an AABB for a CSG shape, extracting the shapes and their bounding box.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/aabb.jl#L5-L17">source</a></section></article><p>Otherwise, jujutracer provides the means to build a binary tree of shapes using Boundary Volume Hierarchy (BVH) algorithm. The BVH is a tree structure that allows to quickly find the closest intersection between a ray and a shape. The BVH is built from a vector of shapes, which wil be divided into nodes with two possible methods:</p><ul><li>simple: the shapes are divided into two groups based on their centroids</li><li>surface area heuristic (SAH): the shapes are divided into two groups based on their surface area, which is a more efficient method.</li></ul><p>After that, the BVH is held in a <a href><code>BVHShape</code></a>, which is a subtype of <a href><code>AbstractShape</code></a>.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.BuildBVH!" href="#jujutracer.BuildBVH!"><code>jujutracer.BuildBVH!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">BuildBVH!(shapes::Vector{AbstractShape}; use_sah::Bool=false, max_shapes_per_leaf::Int64=2, n_buckets::Int64=12)</code></pre><p>Build a Boundary Volume Hierarchy (BVH) tree from a vector of shapes.</p><p><strong>Arguments</strong></p><ul><li><code>shapes::Vector{AbstractShape}</code>: The vector of shapes to build the BVH from. <strong>Note: it will be modified in place.</strong></li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>use_sah::Bool=false</code>: Whether to use the Surface Area Heuristic (SAH) for subdivision.</li><li><code>max_shapes_per_leaf::Int64=2</code>: The maximum number of shapes allowed in a leaf node.</li><li><code>n_buckets::Int64=12</code>: The number of buckets to use for SAH.</li></ul><p><strong>Returns</strong></p><ul><li><code>(BVHNode, Int64)</code>: A tuple containing the root node of the BVH tree and the maximum depth of the tree.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/bvh.jl#L365-L376">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.Subdivide!" href="#jujutracer.Subdivide!"><code>jujutracer.Subdivide!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Subdivide!(node::BVHNode, shapes::Vector{AbstractShape}, centroids::Vector{Point}, depth::Int64; max_shapes_per_leaf::Int64=2)</code></pre><p>Subdivide a BVH node into left and right child nodes based on the centroids of the shapes. Recursive method.</p><p><strong>Arguments</strong></p><ul><li><code>node::BVHNode</code>: The BVH node to subdivide.</li><li><code>shapes::Vector{AbstractShape}</code>: The vector of shapes used by the BVH Tree. <strong>Note: it will be modified in place.</strong></li><li><code>centroids::Vector{Point}</code>: The centroids of the shapes.</li><li><code>depth::Int64</code>: The current depth of the BVH tree.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>max_shapes_per_leaf::Int64=2</code>: The maximum number of shapes allowed in a leaf node.</li></ul><p><strong>Returns</strong></p><ul><li><code>Int64</code>: The maximum depth of the BVH tree after subdivision.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/bvh.jl#L111-L123">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.SubdivideSAH!" href="#jujutracer.SubdivideSAH!"><code>jujutracer.SubdivideSAH!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SubdivideSAH!(node::BVHNode, shapes::Vector{AbstractShape}, centroids::Vector{Point}, depth::Int64; max_shapes_per_leaf::Int64=2, n_buckets::Int64=12)</code></pre><p>Subdivide a BVH node using the Surface Area Heuristic (SAH) method. Recursive method.</p><p><strong>Arguments</strong></p><ul><li><code>node::BVHNode</code>: The BVH node to subdivide.</li><li><code>shapes::Vector{AbstractShape}</code>: The vector of shapes used by the BVH Tree. <strong>Note: it will be modified in place.</strong></li><li><code>centroids::Vector{Point}</code>: The centroids of the shapes.</li><li><code>depth::Int64</code>: The current depth of the BVH tree.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>max_shapes_per_leaf::Int64=2</code>: The maximum number of shapes allowed in a leaf node.</li><li><code>n_buckets::Int64=12</code>: The number of buckets to use for SAH.</li></ul><p><strong>Returns</strong></p><ul><li><code>Int64</code>: The maximum depth of the BVH tree after subdivision.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/bvh.jl#L178-L191">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.BVHShape" href="#jujutracer.BVHShape"><code>jujutracer.BVHShape</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct BVHShape &lt;: AbstractShape</code></pre><p>Shape that holds a BVH tree and the relative shapes.</p><p><strong>Fields</strong></p><ul><li><code>bvhroot::BVHNode</code>: The root node of the BVH tree.</li><li><code>shapes::Vector{AbstractShape}</code>: The vector of shapes used by the BVH Tree.</li></ul><p><strong>Constructor</strong></p><ul><li><code>BVHShape(bvhroot::BVHNode, shapes::Vector{AbstractShape})</code>: Creates a new <code>BVHShape</code> with the specified BVH root and shapes.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/bvh.jl#L484-L492">source</a></section></article><div class="admonition is-category-caution" id="BVHs-and-large-shapes-d39cc0f6ed866b2a"><header class="admonition-header">BVHs and large shapes<a class="admonition-anchor" href="#BVHs-and-large-shapes-d39cc0f6ed866b2a" title="Permalink"></a></header><div class="admonition-body"><p>When using BVHs, and in particular when using the SAH method, adding to the accelerated shapes a large shape which cointains other shapes (such as a box or a sphere used as sky) can lead to a large leaf node, when the first split occurs. This can lead to a very slow rendering time, as the ray tracing algorithm will have to check every shape in the leaf node for intersection.</p></div></div><p>An example of using a BVH is when accelerating a mesh object:</p><pre><code class="language-julia hljs">m_tree = mesh(&quot;asset/tree.obj&quot;; order = &quot;whd&quot;) # Beware that the mesh holds triangles, and not AbstractShapes.

shapes = Vector{AbstractShape}()
for t in m_tree.shapes
    push!(shapes, t)
end

bvh, bvhdepth = BuildBVH!(shapes; use_sah=true) # Returns the root node of the BVH and its depth.
# `shapes` is rearranged according to the BVH intersection order.
bvhshape = BVHShape(bvh, shapes)</code></pre><h2 id="Light-Sources"><a class="docs-heading-anchor" href="#Light-Sources">Light Sources</a><a id="Light-Sources-1"></a><a class="docs-heading-anchor-permalink" href="#Light-Sources" title="Permalink"></a></h2><p>Light sources are defined as a subtype of <a href><code>AbstractLight</code></a>. They are used to illuminate the scene.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.LightSource" href="#jujutracer.LightSource"><code>jujutracer.LightSource</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct LightSource</code></pre><p>A struct representing a point light source.</p><p><strong>Fields</strong></p><ul><li><code>position::Point</code>: the position of the light source in 3D space.</li><li><code>emission::RGB</code>: the color of the light emitted by the source.</li><li><code>scale::Float64</code>: the scale factor for the light source, affecting its intensity.</li></ul><p><strong>Constructors</strong></p><ul><li><code>LightSource(position::Point, emission::RGB=RGB(1.0, 1.0, 1.0), scale::Float64=1.0)</code>: Creates a new light source with the specified position, emission color, and scale factor.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/light.jl#L5-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.SpotLight" href="#jujutracer.SpotLight"><code>jujutracer.SpotLight</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct SpotLight &lt;: AbstractLight</code></pre><p>A struct representing a spotlight source.</p><p><strong>Fields</strong></p><ul><li><code>position::Point</code>: the position of the spotlight in 3D space.</li><li><code>direction::Vec</code>: the direction in which the spotlight is pointing.</li><li><code>emission::RGB</code>: the color of the light emitted by the spotlight.</li><li><code>scale::Float64</code>: the scale factor for the spotlight, affecting its intensity.</li><li><code>cos_total::Float64</code>: the cosine of the angle that defines the total light cone.</li><li><code>cos_falloff::Float64</code>: the cosine of the angle that defines the falloff region of the spotlight.</li></ul><p><strong>Constructors</strong></p><ul><li><code>SpotLight(position::Point, direction::Vec, emission::RGB=RGB(1.0, 1.0, 1.0), scale::Float64=100.0, cos_total::Float64=0.9, cos_falloff::Float64=0.93)</code>: Creates a new spotlight with the specified parameters.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/light.jl#L25-L37">source</a></section></article><h3 id="World-2"><a class="docs-heading-anchor" href="#World-2">World</a><a class="docs-heading-anchor-permalink" href="#World-2" title="Permalink"></a></h3><p>Once the shapes are defined (and lights), they can be added to the world. A vector of shapes and lights need to be prepared, from which the world will be created.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="jujutracer.World" href="#jujutracer.World"><code>jujutracer.World</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct World</code></pre><p>A struct representing a collection of shapes (and lights) in a 3D world.</p><p><strong>Fields</strong></p><ul><li><code>shapes::Vector{AbstractShape}</code>: the vector containing the shapes in the world.</li><li><code>lights::Vector{AbstractLight}</code>: the vector containing the light sources in the world.</li></ul><p><strong>Constructor</strong></p><ul><li><code>World()</code>: creates a new <code>World</code> with an empty vector of shapes.</li><li><code>World(S::Vector{AbstractShape})</code>: creates a new <code>World</code> with the specified vector of shapes. Lights are initialized to an empty vector.</li><li><code>World(S::Vector{AbstractShape}, L::Vector{AbstractLight})</code>: creates a new <code>World</code> with the specified vector of shapes and light sources.</li></ul><p><strong>See also</strong></p><ul><li><a href><code>AbstractShape</code></a>: the abstract type for all shapes.</li><li><a href><code>Sphere</code></a>: a concrete implementation of <code>AbstractShape</code> representing a sphere.</li><li><a href><code>Plane</code></a>: a concrete implementation of <code>AbstractShape</code> representing a plane.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stevelonny/jujutracer/blob/d4410cbf4a1adf2597022a7f2b019c266f91e17b/src/shapes/world.jl#L4-L19">source</a></section></article><p>An example of creating a world is as follows:</p><pre><code class="language-julia hljs">shapes = Vector{AbstractShape}()
lights = Vector{AbstractLight}()

push!(shapes, sphere)
push!(shapes, ground)
push!(lights, light1)
push!(lights, spot1)

world = World(shapes, lights)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../repl_usage/">« REPL Usage</a><a class="docs-footer-nextpage" href="../rendering/">Rendering »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.13.0 on <span class="colophon-date" title="Sunday 22 June 2025 23:29">Sunday 22 June 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
