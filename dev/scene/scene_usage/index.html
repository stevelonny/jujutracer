<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Scene Usage · jujutracer</title><meta name="title" content="Scene Usage · jujutracer"/><meta property="og:title" content="Scene Usage · jujutracer"/><meta property="twitter:title" content="Scene Usage · jujutracer"/><meta name="description" content="Documentation for jujutracer."/><meta property="og:description" content="Documentation for jujutracer."/><meta property="twitter:description" content="Documentation for jujutracer."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">jujutracer</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><span class="tocitem">Home</span><ul><li><a class="tocitem" href="../../">jujutracer</a></li><li><a class="tocitem" href="../../introduction/">Overall</a></li></ul></li><li><span class="tocitem">Usage</span><ul><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox" checked/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">Scene Usage</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Scene Usage</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Scene-Definition-Language"><span>Scene Definition Language</span></a></li><li><a class="tocitem" href="#Float-variables"><span>Float variables</span></a></li><li><a class="tocitem" href="#Materials"><span>Materials</span></a></li><li><a class="tocitem" href="#Transformations"><span>Transformations</span></a></li><li><a class="tocitem" href="#Shapes"><span>Shapes</span></a></li><li><a class="tocitem" href="#CSG-Shapes"><span>CSG Shapes</span></a></li><li><a class="tocitem" href="#Meshes"><span>Meshes</span></a></li><li><a class="tocitem" href="#Lights"><span>Lights</span></a></li><li><a class="tocitem" href="#World-and-camera"><span>World and camera</span></a></li></ul></li><li><a class="tocitem" href="../interpreter/">Interpreter</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">REPL Usage</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../repl/repl_usage/">REPL Usage</a></li><li><a class="tocitem" href="../../repl/world/">World</a></li><li><a class="tocitem" href="../../repl/rendering/">Rendering</a></li><li><a class="tocitem" href="../../repl/repl_examples/">REPL Examples</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Usage</a></li><li><a class="is-disabled">Scene Usage</a></li><li class="is-active"><a href>Scene Usage</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Scene Usage</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/stevelonny/jujutracer" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/stevelonny/jujutracer/blob/main/docs/src/scene/scene_usage.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Scene-Usage"><a class="docs-heading-anchor" href="#Scene-Usage">Scene Usage</a><a id="Scene-Usage-1"></a><a class="docs-heading-anchor-permalink" href="#Scene-Usage" title="Permalink"></a></h1><p>jujutracer provides all the necessary pieces to interpret a <code>scene.txt</code> file, and is able to parse the construction of the desired scene.</p><p>The rendering of the scene is not completly yield from the scene file: the type of renderer, the image resolution, the antialiasing and other parameters are specified at the time of execution. These instructions are provided in the <a href="../interpreter/">Interpreter</a> section.</p><h1 id="Scene-Definition-Language"><a class="docs-heading-anchor" href="#Scene-Definition-Language">Scene Definition Language</a><a id="Scene-Definition-Language-1"></a><a class="docs-heading-anchor-permalink" href="#Scene-Definition-Language" title="Permalink"></a></h1><h2 id="Float-variables"><a class="docs-heading-anchor" href="#Float-variables">Float variables</a><a id="Float-variables-1"></a><a class="docs-heading-anchor-permalink" href="#Float-variables" title="Permalink"></a></h2><p>Float variables are used to define some constants that can be used in the scene.</p><p>They are defined by calling the keyword <code>float</code> followed by the name of the variable and the value between parenthesis.</p><pre><code class="language-text hljs">float name({value})</code></pre><p>For example, to define the value of pi:</p><pre><code class="language-text hljs">float pi(3.141592653589793)</code></pre><h2 id="Materials"><a class="docs-heading-anchor" href="#Materials">Materials</a><a id="Materials-1"></a><a class="docs-heading-anchor-permalink" href="#Materials" title="Permalink"></a></h2><p>Materials are defined by the keyword <code>material</code> followed by the name of the material, and enclosed in parenthesis the definition of the BRDF and the emission pigment.</p><p><strong>Pigments</strong> are used to define a texture. The most basic types of pigments are <code>uniform</code> and <code>checkered</code>. They are based on colors, which are defined as follow a triplet of floats:</p><pre><code class="language-text hljs">&lt; r, g, b &gt;</code></pre><p>Where <code>r</code>, <code>g</code> and <code>b</code> are the red, green and blue components of the color, respectively. Previously defined float variables can be used to define the color, for example:</p><pre><code class="language-text hljs">&lt; pi, 0.5, 0.2 &gt;</code></pre><p>A uniform pigment is defined with the keyword <code>uniform</code> followed by the color:</p><pre><code class="nohighlight hljs">uniform({color})</code></pre><p>While a checkered pigment is defined with the keyword <code>checkered</code> followed by two colors and the number of subdivisions:</p><pre><code class="language-text hljs">checkered({color1}, {color2}, {n_subdivisions})</code></pre><p>And finally there is the <code>image</code> pigment, which is used to load an image from a file. It is defined with the keyword <code>image</code> followed by the path to the image file:</p><pre><code class="language-text hljs">image(&quot;path/to/image.pfm&quot;)</code></pre><p><strong>BRDF</strong> are used to define the interaction of the light with the material. The most basic type of BRDF is <code>diffuse</code>, which is defined with the keyword <code>diffuse</code> followed by a pigment:</p><pre><code class="language-text hljs">diffuse({pigment})</code></pre><p>And there is also the <code>specular</code> BRDF, which is defined with the keyword <code>specular</code> followed by a pigment:</p><pre><code class="language-text hljs">specular({pigment})</code></pre><p>Materials are to be declared as variables, which will be used in the definition of the shapes. The syntax is done with the keyword <code>material</code> followed by the name of the material, and enclosed in parenthesis the definition of the BRDF and the emission pigment:</p><pre><code class="language-text hljs">material mat_name(
    {brdf},
    {emission_pigment}
)</code></pre><p>Some examples of materials:</p><pre><code class="language-text hljs">material ground_material(
    diffuse(checkered(&lt;0.3, 0.5, 0.1&gt;,
                      &lt;0.1, 0.2, 0.5&gt;, 4)),
    uniform(&lt;0, 0, 0&gt;)
)

material sphere_material(
    specular(uniform(&lt;0.5, 0.5, 0.5&gt;)),
    uniform(&lt;0, 0, 0&gt;)
)

material sky_material(
    diffuse(image(&quot;asset/sky.pfm&quot;)),
    uniform(&lt;0, 0, 0&gt;)
)</code></pre><h2 id="Transformations"><a class="docs-heading-anchor" href="#Transformations">Transformations</a><a id="Transformations-1"></a><a class="docs-heading-anchor-permalink" href="#Transformations" title="Permalink"></a></h2><p>Transformations are used both in shapes definitions and to orient the camera.  The supported transformations are defined with the keywords <code>identity</code>, <code>translation</code>, <code>rotation_x</code>, <code>rotation_y</code>, <code>rotation_z</code> and <code>scaling</code>. They are defined as follows:</p><pre><code class="language-text hljs">identity
translation([x, y, z])
rotation_x(angle)
rotation_y(angle)
rotation_z(angle)
scaling([x, y, z])</code></pre><p>Where <code>angle</code> is in radians and <code>[x, y, z]</code> are the components of the vector. Previously defined float variables can be used to define the angle or the vector values.</p><p>They can be combined together by using the <code>*</code> operator, which is the composition of the transformations. For example, to rotate an object around the x-axis and then translate it:</p><pre><code class="language-text hljs">float angle(30.0)

...

rotation_x(angle) * translation([1, 0, 0])</code></pre><h2 id="Shapes"><a class="docs-heading-anchor" href="#Shapes">Shapes</a><a id="Shapes-1"></a><a class="docs-heading-anchor-permalink" href="#Shapes" title="Permalink"></a></h2><p>Shapes are defined similar to materials. They are define by applying the keyword corresponding to the type of shape, followed by the name of the shape and enclosed in parenthesis the material and the transformation, or in some cases the parameters of the shape.</p><pre><code class="language-text hljs">sphere({material_name}, {transformation})
box({material_name}, {transformation})
cylinder({material_name}, {transformation})
cone({material_name}, {transformation})
plane({material_name}, {transformation})
circle({material_name}, {transformation})
rectangle({material_name}, {transformation})</code></pre><p>Other shapes are to be defined with additional parameters.</p><pre><code class="language-text hljs">triangle({material_name}, {v1}, {v2}, {v3})
parallelogram({material_name}, {v1}, {v2}, {v3})</code></pre><p>Where <code>{v1}</code>, <code>{v2}</code> and <code>{v3}</code> are the vertices of the triangle or parallelogram, defined as the vector <code>[x, y, z]</code>.</p><p>Some examples of shapes:</p><pre><code class="language-text hljs">sphere sphere1(
    sphere_material,
    translation([0, 0, 0]) * scaling([0.5, 0.5, 0.5])
)

box box1(
    ground_material,
    translation([0, -0.5, 0]) * scaling([2, 0.5, 2])
)

triangle triangle1(
    sphere_material,
    [0, 0, 0],
    [1, 0, 0],
    [0, 1, 0]
)</code></pre><h2 id="CSG-Shapes"><a class="docs-heading-anchor" href="#CSG-Shapes">CSG Shapes</a><a id="CSG-Shapes-1"></a><a class="docs-heading-anchor-permalink" href="#CSG-Shapes" title="Permalink"></a></h2><p>CSG (Constructive Solid Geometry) shapes are defined by combining other shapes using boolean operations. As per shapes, they are defined by applying the keyword corresponding to the type of CSG shape, followed by the name of the shape and enclosed in parenthesis transformation, first shape and second shape. The shapes used must be <em>water-tight</em>.</p><p>The supported CSG shapes are <code>union</code>, <code>intersection</code> and <code>difference</code>:</p><pre><code class="language-text hljs">union name({transformation}, {shape1}, {shape2})`
difference name({transformation}, {shape1}, {shape2})`
intersection name({transformation}, {shape1}, {shape2})`</code></pre><p>Where <code>{shape1}</code> and <code>{shape2}</code> are the names of the shapes to be combined, and can be other CSG shapes. Shapes need to be defined before the CSG shapes.</p><p>Some examples of CSG shapes:</p><pre><code class="language-text hljs">union union1(
    translation([0, 0, 0]) * scaling([0.5, 0.5, 0.5]),
    sphere1,
    box1
)
difference difference1(
    translation([0, 0, 0]) * scaling([0.5, 0.5, 0.5]),
    sphere1,
    box1
)
intersection intersection1(
    translation([0, 0, 0]) * scaling([0.5, 0.5, 0.5]),
    sphere1,
    box1
)

union union2(
    translation([0, 0, 0]) * scaling([0.5, 0.5, 0.5]),
    union1,
    difference1
)</code></pre><h2 id="Meshes"><a class="docs-heading-anchor" href="#Meshes">Meshes</a><a id="Meshes-1"></a><a class="docs-heading-anchor-permalink" href="#Meshes" title="Permalink"></a></h2><p>External models in the OBJ format can be loaded as meshes. They are defined with the keyword <code>mesh</code> followed by the name of the mesh, and in parenthesis the name of the material to be used, the transformation to be applied to the mesh, the filename of the mesh and the expected order for the coordinates.</p><pre><code class="language-text hljs">mesh({material_name}, {transformation}, {filename}, {order})</code></pre><p>Where <code>{filename}</code> is a string defined as <code>&quot;path/to/mesh.obj&quot;</code>. The last parameter <code>{order}</code> is a string that defines the order of the coordinates in the OBJ file, which define the coordinates of the vertices. The expected format is a succesion of <code>d</code>, <code>w</code> and <code>h</code>, where <code>d</code> stands for depth, <code>w</code> for width and <code>h</code> for height. For example, if the OBJ file has the coordinates in the order <code>[x, y, z]</code>, the order is <code>&quot;dwh&quot;</code>. If the coordinates are in the order <code>[x, z, y]</code>, the order is <code>&quot;whd&quot;</code></p><p>Some examples of meshes:</p><pre><code class="language-text hljs">mesh tree(mat_tree, translation([-5.0, 0.0, -0.05]) * scaling([tree_scale, tree_scale, tree_scale]), &quot;asset/tree.obj&quot;, &quot;whd&quot;)
mesh m1(mat_box, translation([1.5, 2.5, 0.0]) * scaling([0.1, 0.1, 0.1]) * translation([0.0, 0.0, -3.05]), &quot;humanoid_tri.obj&quot;, &quot;dwh&quot;)</code></pre><h2 id="Lights"><a class="docs-heading-anchor" href="#Lights">Lights</a><a id="Lights-1"></a><a class="docs-heading-anchor-permalink" href="#Lights" title="Permalink"></a></h2><p>Point-like lights are used in the Point Light Tracing renderer.</p><p>Point lights are defined with the keyword <code>pointlight</code> followed by the name of the light, the position of the light and the color of the light. The position is defined as a vector <code>[x, y, z]</code> and the color as a triplet of floats <code>&lt;r, g, b&gt;</code>.</p><pre><code class="language-text hljs">pointlight name([x, y, z], {color}, {scale_factor})</code></pre><p>Spotlights are defined with the keyword <code>spotlight</code> followed by the name of the light, the position of the light, the direction of the light, the color of the light, the angle of the cone of light, the falloff angle, and finally the scale factor.</p><pre><code class="language-text hljs">spotlight name([x, y, z], [dx, dy, dz], {color}, {angle}, {falloff_angle}, {scale_factor})</code></pre><p>Where <code>[dx, dy, dz]</code> is the direction of the light.</p><h2 id="World-and-camera"><a class="docs-heading-anchor" href="#World-and-camera">World and camera</a><a id="World-and-camera-1"></a><a class="docs-heading-anchor-permalink" href="#World-and-camera" title="Permalink"></a></h2><p>Once the shapes have been defined, they need to be added to the world. Shapes are added with the keyword <code>add</code> followed by the name of the shape.</p><pre><code class="language-text hljs">add sphere1
add box1
add union2</code></pre><p>Also lights need to be added to the world, with the same keyword <code>add</code> followed by the name of the light:</p><pre><code class="language-text hljs">add pointlight1
add spotlight1</code></pre><div class="admonition is-info" id="CSG-and-Meshes-2b0b35e85748e130"><header class="admonition-header">CSG and Meshes<a class="admonition-anchor" href="#CSG-and-Meshes-2b0b35e85748e130" title="Permalink"></a></header><div class="admonition-body"><p>Under the hood, some shapes are automatically boxed into <a href="#acceleration-structures">acceleration structures</a>:</p><ul><li>CSG shapes are boxed into an AABB.</li><li>mesh constituents are boxed into the <strong>same</strong> BVH.</li></ul></div></div><p>And last, but not the least, a camera needs to be defined. The camera is defined with the keyword <code>camera</code> followed by the type of camera, the transformation to be applied to the camera, and the aspect ratio. The type of camera can be either <code>perspective</code> or <code>orthogonal</code>. The perspective camera also requires a screen distance.</p><pre><code class="language-text hljs"># perspective
camera(perspective, {tranformation}, {aspect_ratio}, {screen_distance})
# orthogonal
camera(orthogonal, {tranformation}, {aspect_ratio})</code></pre><p><code>{aspect_ratio}</code> and <code>{screen_distance}</code> are both float variables.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../introduction/">« Overall</a><a class="docs-footer-nextpage" href="../interpreter/">Interpreter »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.13.0 on <span class="colophon-date" title="Sunday 22 June 2025 23:29">Sunday 22 June 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
